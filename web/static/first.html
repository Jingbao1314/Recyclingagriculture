<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="./css/bootstrap.css">
	<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="./css/first-style.css">

	<script type="text/javascript" src="./js/jquery.js"></script>
	<script src="./js/jquery-2.2.3.min.js"></script>
	<script src="./js/bootstrap.min.js"></script>
	<script>
	</script>
</head>

<body>
<div class="zong">
	<div class="main">
		<div class="main1" style="width:250px;height:85px;float:left;">
			<img src="./imgages/logo.png" style="width:250px;height:85px;">
		</div>
		<div class="main2" algin="right">
			<ul class="ul1">
				<li id="m1">
					<p class="on"></p>
					<a style="color: forestgreen;" href="#">
						<em style="text-align: center;color: forestgreen;">home<br><b>首页</b></em>
					</a>
				</li>
				<li id="m2">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="lawpolicies.html">
						<em style="text-align: center;">law policies<br><b>法规政策</b></em>
					</a>
				</li>
				<li id="m3">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="Circular.html">
						<em style="text-align: center;">Circular<br><b>循环农业</b></em>
					</a>
				</li>
				<li id="m4" class="dropdown">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="protecte.html">
						<em style="text-align: center;">Protecte<br><b>环保农业</b></em>
					</a>
				</li>
				<li id="m5" class="dropdown1">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="recycle.html">
						<em style="text-align: center;">Recycle<br><b>变废为宝</b></em>
					</a>
				</li>
				<li id="m6">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="result.html">
						<em style="text-align: center;">Result<br><b>研究成果</b></em>
					</a>
				</li>
				<li id="m7">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="buy shell.html" target="_parent">
						<em style="text-align: center;">Buy Sell<br><b>你需我求</b></em>
					</a>
				</li>
				<li id="m8">
					<p style="color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a type="button" data-toggle="modal" data-target="#myModal">
						<em style="cursor:pointer;text-align: center;">login<br><b>登录/注册</b></em>
					</a>
					<div class="modal fade" id="myModal">
						<div class="modal-dialog" id="myModalDialog">
							<div class="modal-content" style="width:460px;height:420px;">
								<div class="modal-header" style="height:81px;background-color: #09a3dc;">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4 class="modal-title" id="myModalLabel" style="line-height:55px;color: white;">登录</h4>
								</div>
								<div class="modal-body" style="height:155px;">
									<form method="post" action="first.js" style="margin-top: 40px;">
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;border: 1px solid gray;">
											<span class="glyphicon glyphicon-phone" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="text" id="username" class="username" placeholder=" 手机号"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:18px;border: 1px solid gray;">
											<span class="glyphicon glyphicon-lock" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="password" id="password" class="password" placeholder=" 密码"/>
										</p><br>
										<a id="btn3" data-toggle="modal" style="cursor:pointer;">管理员登录</a>
										<a id="btn2" data-toggle='modal' style="cursor:pointer;margin-left: 120px;">立即注册</a><br><br><br>
										<button style="width:170px;margin-top: 10px;background-color: #09a3dc;color: white;" type="button" id="login_btn" onclick="check_valid()" class="btn">登录</button>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal2">
						<div class="modal-dialog" id="myModalDialog2">
							<div class="modal-content" style="width:460px;height:500px;">
								<div class="modal-header" style="height:81px;background-color: #09a3dc;">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4 class="modal-title" id="myModalLabel2" style="line-height: 55px;color:white;">注册</h4>
								</div>
								<div class="modal-body" style="height:155px;">
									<form method="post" action="first.js">
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:30px;border: 1px solid gray;">
											<span class="glyphicon glyphicon-phone" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="text" id="username2" placeholder=" 手机号"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:10px;border: 1px solid gray;">
											<span class="glyphicon glyphicon-user" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="text" id="nicheng" placeholder=" 昵称"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:10px;border: 1px solid gray;">
											<span class="glyphicon glyphicon-lock" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="password" id="password2" placeholder=" 密码"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:10px;border: 1px solid gray;">
											<span class="	glyphicon glyphicon-envelope" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="email" id="email1" placeholder=" 邮箱"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:10px;border: 1px solid gray;">
											<span class="	glyphicon glyphicon-envelope" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="text" id="home" placeholder=" 生源地"/>
										</p><br>
										<button style="width:170px;margin-top: 30px;background-color: #09a3dc;color: white;" type="button" id="ok_btn" onclick="check_validr();" class="btn btn-primary">注册</button>
									</form>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal3">
						<div class="modal-dialog" id="myModalDialog3">
							<div class="modal-content" style="width:460px;height:420px;">
								<div class="modal-header" style="height:81px;background-color: #09a3dc;">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									<h4 class="modal-title" id="myModalLabel3" style="line-height:55px;color: white;">管理员登录</h4>
								</div>
								<div class="modal-body" style="height:155px;">
									<form method="post" action="first.js" style="margin-top: 40px;">
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;border: 1px solid gray;">
											<span class="glyphicon glyphicon-phone" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="text" id="username3" class="username3" placeholder=" 用户名"/>
										</p>
										<p style="margin-bottom: 0px;width:calc(346px - 10%);height:40px;text-align:center;padding:0px;margin: 0 auto;margin-top:18px;border: 1px solid gray;">
											<span class="glyphicon glyphicon-lock" style="width:20px;height:20px;z-index:5;color: grey;left: 9px;"></span>&nbsp;
											<input style="border-left:1px solid gainsboro;width:260px;height:36px;border-top:0px;border-right:0px;border-bottom:0px;margin-left:13px;"
												   type="password" id="password3" class="password3" placeholder=" 密码"/>
										</p><br>
										<button style="width:170px;margin-top: 60px;background-color: #09a3dc;color: white;" type="button" id="adminlogin_btn" onclick="check_validadmin()" class="btn">管理员登录</button>
									</form>
								</div>
							</div>
						</div>
					</div>
				</li>
				<li id="m9">
					<p style="width:80px;color: transparent;/*background-color: rgb(255,255,255);*/margin-bottom:18px;"></p>
					<a href="forum.html" target="_parent">
						<em style="text-align: center;">Forum<br><b>论坛</b></br></em>
					</a>
				</li>
			</ul>
		</div>
		<div id="main3"></div>
	</div>
	<div id="index">
		<div class="findex4">
			<div class="firstindex">
				<video width="100%" height="100%" controls id="myvideo" src="112.mp4" autoplay="autoplay"></video>
			</div>
			<div class="findex1">
				<p style="box-shadow: 4px 4px 5px #888888;background-color: #95C8F1;width: 350px;">推荐</p>
				<div class="firstindex1">

				</div>
				<!--<p id="news1" style="padding-left: 15px;text-align:left;color: #2F5BB7;width: 350px;">推荐</p>
				<p id="news2" style="padding-left: 15px;text-align:left;color: #2F5BB7;width: 350px;">你好年后滑腻推荐</p>
				<p id="news3" style="padding-left: 15px;text-align:left;color: #2F5BB7;width: 350px;">推荐</p>
				<p id="news4" style="padding-left: 15px;text-align:left;color: #2F5BB7;width: 350px;">推荐</p>-->
			</div>
		</div>
		<div class="findex2">
			<div class="findex3">
				<label style="margin-left:10px;font-size: 15px;float: left;line-height: 35px;">新闻看点</label>
				<a href="new1.html" style="cursor: pointer;margin-left:412px;font-size: 15px;line-height: 35px;">更多>></a>
			</div>
			<div id="container">

			</div>
		</div>
	</div>

</div>
<!--<script type="text/javascript" src="./js/first.js"></script>--><!--
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>-->
<script type="text/javascript">
	var vlist=['112.mp4','115.mp4'];
	var vlen=vlist.length;
	var curr=0;
	var vid=document.getElementById("myvideo");
	vid.onended=function(){
		vid.src=vlist[curr+1];
		curr++;
		if(curr>=vlen){curr=0; vid.src=vlist[0]}
		vid.play();
	}


	window.onload=function () {
        var temp="<tr>标题：<td style='height: 25px;float: left;' onclick=\"myfun(bbb)\"><li><a style='color: #2F5BB7;' href=\"javascript:;\">aaa</a></li></td></tr>";

        $.post("/ServletNewLimit",
            {
                /*id:id,
                title:title,
                content:content*/
            },
            function(data,status){
                console.log(data);
                //var data1=JSON.parse(data);
                //console.log(data1);
                $(".container").empty();
                $.each(JSON.parse(eval(data)), function(index, value) {
                    var newt = temp.replace(/aaa/g,value.title).replace(/bbb/g,value.id);
                    //console.log(newt);
                    console.log(temp);
                    $("#container").append(newt);
                });
            });

        function myfun(id){
            location.href ="showcontent.html?newsid="+id;
        }
    }

	$(document).ready(function () {
		$("#btn2").click(function(){
			$("#myModal2").modal("show");
		});

		$("#btn3").click(function(){
			$("#myModal3").modal("show");
		});

	});

    var phoneCheck = function (tel) {
        if (isNaN(tel)) {
            return false;
        } else {
            return true;
        }
    };

    function check_validr() {
        var username = encodeURI($("#username2").val());
        var email = encodeURI($("#email1").val());


        if (username == "") {
            alert("请输入账号");
            return false;
        }
        if (!phoneCheck(username)) {
            alert("输入手机号不正确");
            return false;
        }
        if (username.length != 11) {
            alert("输入手机号应该11位");
            return false;
        }
        if (!$("#nicheng").val()) {
            alert("请输入昵称！");
            return false;
        }
        if (!$("#password2").val()) {
            alert("密码不能为空");
            return false;
        }
        if (email == "") {
            alert("请输入邮箱！");
        } else {
            var reg = /^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;
            isok = reg.test(email);
            if (!isok) {
                alert("邮箱格式不正确！");
                document.getElementByIdx("emailname").focus();
                return false;
            }
        }
        if (!$("#home").val()) {
            alert("请输入生源地！");
            return false;
        }


        var name = $('#username2').val(),
            nicheng = $('#nicheng').val(),
            password = $('#password2').val(),
            email1 = $('#email1').val(),
            home = $('#home').val(),
            data = {iphone: name, uname: nicheng, upwd: password, email: email1, address: home};
        $.ajax({
            type: 'POST',
            url: 'http://116.196.91.8:8080/webtest/Register',
            data: data,
            success: function (data) {
                console.log(data);
                if(data==true){
                    alert("注册成功!");
                    $("#myModal2").hide();
				}else{
                    alert("未注册成功！");
				}

            }
        })
    }
    function check_valid() {

    var username = encodeURI($("#username").val());
    if (username == "") {
        alert("请输入账号");
        return false;
    }
    if (!phoneCheck(username)) {
        alert("输入手机号不正确");
        return false;
    }
    if (username.length != 11) {
        alert("输入手机号应该11位");
        return false;
    }
    if (!$("#password").val()) {
        alert("密码不能为空");
        return false;
    }

        var name = $('#username').val(),
            password = $('#password').val(),
            data = "{\"iphone\" :\""+ name+"\",\"upwd\" :\""+ password+"\"}";
    //alert(name);
    //alert(password);
//    $.post("/UserLogin",
//		{
//		    iphone:name,
//			upwd:password
//		},function (data) {
//        alert(data);
//			if(data==true){
//				alert("登录成功！");
//				window.location.href="first.html";
//			}else{
//			    alert("未登录成功");
//			}
//        })
        $.ajax({
            type : 'POST',
            url : '/UserLogin',
            data : data,
            async: false,
            success : function(data){
                alert(JSON.stringify(data));
                console.log(data);
                if(data==true){
                    alert("登录成功!");
                    window.location.href="first.html";
                }else{
                    alert("未登录成功！");
				}
            }
        })

}

	function check_validadmin() {

        var username = encodeURI($("#username3").val());
        if (username == "") {
            alert("请输入账号");
            return false;
        }
        /*if (!phoneCheck(username)) {
            alert("输入手机号不正确");
            return false;
        }
        if (username.length != 11) {
            alert("输入手机号应该11位");
            return false;
        }*/
        if (!$("#password3").val()) {
            alert("密码不能为空");
            return false;
        }

            var name = $('#username3').val(),
                password = $('#password3').val(),
                data = {iphone : name,upwd : password};
        /*alert(name);
        alert(password);*/
            $.ajax({
                type : 'POST',
                url : 'http://116.196.91.8:8080/webtest/UserLogin',
                data : data,
                success : function(data){
                    alert(JSON.stringify(data));
                    console.log(data);
                    if(data==true){
                        alert("管理员登录成功!");
                        window.location.href="admin.html";
                    }else{
                        alert("未登录成功");
					}
                }
            })
    };





	/*$('#ok_btn').on('click',function(){
		var name = $('#username2').val(),
				nicheng = $('#nicheng').val(),
				password = $('#password2').val(),
				email1 = $('#email1').val(),
				home = $('#home').val(),
				data = {Iphone : name,Uname :nicheng,Upwd : password,Email : email1,Address :home};
		$.ajax({
			type : 'POST',
			url : '16.196.91.8:8080/webtest/webtest/Register',
			data : data,
			success : function(data){
				console.log(data);
				alert("注册成功!");
				$("#myModal2").hide();
			}
		})
	});

	$('#login_btn').on('click',function(){
		var name = $('#username').val(),
				password = $('#password').val(),
				data = {Iphone : name,Upwd : password};
		$.ajax({
			type : 'POST',
			url : 'http://16.196.91.8:8080/webtest/UserLogin',
			data : data,
			success : function(data){
				alert(JSON.stringify(data));
				console.log(data);
				if(data==true){
					alert("登录成功!");
					$("#myModal").modal("hide");
					$("#main3").text();
				}
			}
		})
	});

	$('#adminlogin_btn').on('click',function(){
		var name = $('#username3').val(),
				password = $('#password3').val(),
				data = {Uname : name,Upwd : password};
		$.ajax({
			type : 'POST',
			url : 'http://16.196.91.8:8080/webtest/UserLogin',
			data : data,
			success : function(data){
				alert(JSON.stringify(data));
				console.log(data);
				if(data==true){
					alert("管理员登录成功!");
					window.location.href="admin.html";
				}
			}
		})
	});*/
</script>
</body>
</html>
